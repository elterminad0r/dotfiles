#!/usr/bin/env bash

# simple wrapper script for my p256.py, which seeks to avoid needless
# regeneration.

# It's bash because I need the -nt operator. I'll make use the sh speedup when
# POSIX gets with the times

CACHE_NAME="$HOME/.cache/p256.txt"
P256_NAME="$HOME/bin/p256.py"

if [[ ! -f "$CACHE_NAME" ]] || [[ "$P256_NAME" -nt "$CACHE_NAME" ]]; then
    >&2 echo "regenerating"
    mkdir -p ~/.cache
    "$P256_NAME" > "$CACHE_NAME"
fi

cat "$CACHE_NAME"
