# vim: syntax=zsh

# function to fully expand its arguments if they're aliases.
# obviously for personal use only, it uses eval etc and so forth ad nauseum
enhance()  {
    local args=$@
    eval "
    IZAAK_ENHANCE_F() {
        $args
    }"
    if [[ -n $ZSH_VERSION ]]; then
        declare -f IZAAK_ENHANCE_F | head -n -1 | tail -n +2
    # assume everything else acts like bash
    else
        declare -f IZAAK_ENHANCE_F | head -n -1 | tail -n +3
    fi
}

alias pacman="pacman --color=auto"
alias systree='for i in $(pacman -Qeq); do pactree $i; done'

alias cmatrix="cmatrix -abu 1"

alias p="pacman"

alias grep="grep -i --color=auto"
alias ack="ack -i"

alias ifpc="instantfpc"

# FIXME this doesn't actually work because of hoogle for some reason
alias hoogle="hoogle --color=true"

alias info="info --vi-keys"

alias feh="feh -d"

eval `dircolors $HOME/.dir_colors`

alias ls="LC_COLLATE=C ls -h --group-directories-first --color=auto"
alias l="ls -l"
alias la="ls -la"
alias lt="\ls -ltrh --color=auto"
alias lb="ls -lSr"
alias ldir="ls -l --directory"

alias rm="rm -i"
alias mv="mv -i"
alias cp="cp -i"

alias vi=vim
alias vitx="vim --servername vim **/*.tex **/*.sty"
# so I get my own vimrc
alias view="vim -R"

revim() {
    local n=${1:-1}
    vim -S $(find ~/.vim/sessions -type f | head -n $n | tail -n 1)
}

alias lock="light-locker-command -l"

alias maths="ipython --profile=maths"

alias tt='elinks -dump -dump-width $COLUMNS ~/Documents/timetable.html'

alias c="xclip -selection clipboard"
alias v="xclip -selection clipboard -o -"

alias o="mimeopen"

alias lmk="latexmk"
alias present="evince -s"

alias sudo="sudo "

alias rzsh="sudo ZSH_DISABLE_COMPFIX=true ZDOTDIR=$HOME HOME=$HOME zsh"
alias bzsh="ZDOTDIR=/ zsh"

alias rbash="sudo HOME=$HOME bash"

alias via="vi ~/.izaak_aliases"
alias vi3="vi ~/.config/i3/config"
alias viz="vi ~/.zshrc"
alias vit="vi ~/Documents/TODO"
alias viv="vi ~/.vim/vimrc"
alias vif="vi ~/fun"
alias vid="vi ~/fun/diary"
alias vix="vi ~/.Xresources"
alias vic="vi ~/.config"
alias visafe="vi -c 'set noswapfile | set nobackup | set nowritebackup | set viminfo='"
alias vienc="visafe ~/Documents/.enc/"
alias vitm="vi ~/.tmux.conf"

alias x="xrdb merge ~/.Xresources"
alias t="tmux source-file ~/.tmux.conf"

alias wifirestart="sudo systemctl restart NetworkManager.service"
alias p88="ping 8.8.8.8 -c 20 -w 60"

alias gls="git ls-files"
alias grm="git rm"

# special git for dotfiles
cfg() {
    /usr/bin/git --git-dir=$HOME/.cfg/ --work-tree=$HOME $@
}

# TODO make this automatically generate itself from git plugin

alias cfga='cfg add'
alias cfgaa='cfg add --update'
alias cfgc='cfg commit -v'
alias cfgst='cfg status'
alias cfgpush='cfg push -u origin master'

gal() {
    alias | grep git | grep "$*"
}

alias mutt="echo 'use configured mailbox'"
alias hills_mail='\mutt -F $HOME/.hills_muttrc'
alias gmail='\mutt -F $HOME/.gmail_muttrc'

screenshots() {
    \ls -tr --directory $HOME/Pictures/screenshots/* |
        grep "${2:-}" | tail -"${1:-1}";
}

wttr() {
    curl -H "Accept-Language: ${LANG%_*}" wttr.in/"${*:-Great_Shelford}"
}

cppath() {
    realpath $1 | c
}
