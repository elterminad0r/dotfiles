# Automatically generate completions for cfg and friends

# It's perhaps a little cheeky of me to put this in $FPATH, as it means that if
# you do autoload -Uz Makefile && Makefile; you get an error.

SHELL = bash

# total bodge to generate proper completion routines for my _cfg function, which
# has a weird index, which zsh doesn't by default use.
# TODO: see if it's possible to just fix _git to use --git-dir
_cfg: /usr/share/zsh/functions/Completion/Unix/_git Makefile
	sed 's/git/cfg/g;s/tig/gfc/g;1a'$$'\\\n\\\n''# this file was automatically generated by Izaak from _git' $< > $@
	# force completion rebuild on next compinit
	rm "$$ZDOTDIR/.zcompdump"
